package operacoesbasicas;

import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.List;
import java.util.Scanner;

public class CarrinhoDeCompras {
    private List<Itens> itensList;//lista para armazenar os itens 
    List<Itens> itensRemovidos; // Lista para armazenar itens removidos

    public ListaItens() {
        this.itensList = new ArrayList<>();//inicializa a lista itens
        this.itensRemovidos = new ArrayList<>(); // Inicializa a lista de tarefas removidas
    }

    public void adicionarItens(String descricao) {
        itensList.add(new Itens(descricao));
    }

    // Remover todas as ocorrências de itens com a descrição fornecida
    public void removerItens(String descricao) {
        for (int i = itensList.size() - 1; i >= 0; i--) { // Iterar de trás para frente para remover com segurança
            if (itensList.get(i).getDescricao().equalsIgnoreCase(descricao)) {
                itensRemovidos.add(itensList.remove(i)); // Adiciona à lista de itens removidos e remove da lista principal
            }
        }
    }

    public int obterNumeroTotalItens() {
        return itensList.size(); 
    }

    // Imprimir as descrições dos itens
    public void obterDescricoesItens() {
        if (itensList.isEmpty()) {
            System.out.println("A lista de itens está vazia.");
        } else {
            for (Itens i :itensList) {
                System.out.println(i.getDescricao());
                System.out.println(i.getQuantidade());                
                System.out.println(i.getPreco());
                
            }
        }
    }

    // Imprimir as descrições dos itens removidos
    public void obterDescricoesTarefasRemovidas() {
        if (tarefasRemovidas.isEmpty()) {
            System.out.println("A lista de itens removidos está vazia.");
        } else {
            for (Itens i : itensRemovidos) {
                System.out.println(i.getDescricao());
                System.out.println(i.getQuantidade());                
                System.out.println(i.getPreco());
                System.out.println(i.getValorTotal());
            }
        }
    }

    public static void main(String[] args) {
        ListaItens  = new ListaItens();
        Scanner scanner = new Scanner(System.in); //abrir interação com uusuário pelo Scanner

        //  opções para o usuário escolher

        while (true) {
            System.out.println("\nMenu:");
            System.out.println("1. Adicionar Item");
            System.out.println("2. Remover Item");
            System.out.println("3. Listar Itens");
            System.out.println("4. Listar itens removidos"); 
            System.out.println("5. Sair");
            System.out.print("Escolha uma opção: ");
//colocando um switch para fazer a interação com as opões escolhidas
            try {
                int opcao = scanner.nextInt();
                scanner.nextLine(); // Consumir a quebra de linha

                switch (opcao) {
                    case 1:
                        System.out.print("Digite a descrição do item: ");
                        String descricao = scanner.nextLine();
                        listaItens.adicionarItens(descricao);
                        break;
                    case 2:
                        System.out.print("Digite a descrição item a ser removido: ");
                        String descricaoRemover = scanner.nextLine();
                        listaItens.itensRemovidos(descricaoRemover);
                        break;
                    case 3:
                        System.out.println("\nItens:");
                        listaItens.obterDescricoesItens();
                        break;
                    case 4:
                        System.out.println("\nItens Removidos:");
                        listaItens.obterDescricoesItensRemovidas(); // Chama o método para listar itens removidos
                        break;
                    case 5:
                        System.out.println("Saindo...");
                        scanner.close();
                        return; // Sai do programa apenas se o usuário escolher a opção 4
                    default:
                        System.out.println("Por favor digite o nº da opção que você quer escolher.");
                }
                //tratamento da exeção caso não digite um número da opção corretamente
            } catch (InputMismatchException e) {
                System.out.println("Por favor digite o nº da opção que você quer escolher.");
                scanner.nextLine(); // Limpa o buffer de entrada
            }
        }
    }
}
